<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Local Photos</title>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: blob:; script-src 'self'; style-src 'self' 'unsafe-inline';">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <!-- Top strip (matches sidebar color). Stays above sidebar but below the photo overlay. -->
  <header class="top-strip" role="banner" aria-label="Верхняя полоса">
    <div class="top-left">
      <button id="menu-toggle" class="menu-toggle" aria-label="Открыть меню" aria-expanded="false" type="button">☰</button>
      <div class="top-brand">Фотопортал</div>
    </div>
    <div class="top-right" aria-hidden="false">
      <button id="top-plus" class="top-btn" type="button" aria-label="Добавить" title="Добавить">
        <img src="/icons/plus.svg" alt="Добавить" class="icon-plus" width="22" height="22" />
      </button>
<div id="top-plus-menu" class="top-plus-menu hidden" aria-hidden="true" role="dialog" aria-label="Меню загрузки">
  <div class="tpm-row tpm-scope">
    <label class="tpm-label"><input type="radio" name="tpm-scope" value="personal"> Личное</label>
    <label class="tpm-label"><input type="radio" name="tpm-scope" value="shared" checked> Общее</label>
  </div>
  <button id="top-pick-file-btn" type="button" class="file-label top-file-btn" aria-haspopup="dialog">
    Выберите фото
  </button>
  <span id="top-file-picked-text" class="file-picked" aria-live="polite"></span>
  <button id="top-upload-btn" type="button" class="uploader-upload hidden">Загрузить</button>
</div>
      <button id="top-gear" class="top-btn" type="button" aria-label="Настройки" title="Настройки">
        <img src="/icons/gear.svg" alt="Настройки" class="icon-gear" width="22" height="22" />
      </button>
      <button class="top-btn" type="button" id="user-btn" aria-label="Пользователь" title="Пользователь" class="top-btn" type="button"><img src="/icons/user.svg" alt="Пользователь" class="icon-user" width="18" height="18" /></button>
    </div>
  </header>

  <div id="app" class="app">
    <aside class="sidebar" role="navigation" aria-label="Боковая панель">
      <!-- 'Фотопортал' переехал в верхнюю полосу (не меняем остальную логику панели) -->
      <div class="nav">
        <button id="btn-shared" class="nav-btn active" aria-pressed="true" type="button">Общие</button>
        <button id="btn-all" class="nav-btn" aria-pressed="false" type="button">Мои</button>
      </div>

      <div class="uploader hidden" aria-label="Загрузка файлов">
        <input id="file-input" name="file" type="file" accept="image/*" multiple
               style="position:absolute;left:-9999px;width:1px;height:1px;opacity:0;" />
        <button id="pick-file-btn" type="button" class="file-label" role="button" aria-haspopup="dialog">
          Выберите фото
        </button>
        <span id="file-picked-text" class="file-picked" aria-live="polite"></span>

        <select id="scope-select" aria-label="Выбор области">
          <option value="personal">Личное</option>
          <option value="shared">Общее</option>
        </select>
        <button id="upload-btn" type="button">Загрузить</button>
      </div>

      <div class="login hidden" id="login-block">
        <input id="username" placeholder="Имя пользователя" autocomplete="username" />
        <input id="password" type="password" placeholder="Пароль" autocomplete="current-password" />
        <button id="login-btn" type="button">Войти</button>
        <button id="logout-btn" class="hidden" type="button">Выйти</button>
      </div>
    </aside>

    <main class="main" role="main">
      <div id="blocks" class="blocks" aria-live="polite"></div>
      <div id="loader" class="loader hidden">Загрузка...</div>
    </main>
  </div>

  <div id="context-menu" class="context-menu" role="menu" aria-hidden="true">
    <button id="ctx-upload" type="button">Загрузить</button>
    <button id="ctx-delete" type="button">Удалить</button>
  </div>

  <div id="overlay" class="overlay hidden" aria-hidden="true" role="dialog" aria-label="Фото">
    <!-- Top semi-transparent black bar (appears on cursor movement) -->
    <div id="overlay-topbar" class="overlay-topbar" aria-hidden="true">
      <div class="overlay-topbar-left">
        <button id="top-close-btn" class="topbar-btn" aria-label="Закрыть" type="button">
          <!-- Cross SVG -->
          <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M18.3 5.71a1 1 0 0 0-1.41 0L12 10.59 7.11 5.7A1 1 0 0 0 5.7 7.11L10.59 12l-4.89 4.89a1 1 0 1 0 1.41 1.41L12 13.41l4.89 4.89a1 1 0 0 0 1.41-1.41L13.41 12l4.89-4.89a1 1 0 0 0 0-1.4z"/>
          </svg>
        </button>
      </div>
      <div class="overlay-topbar-right">
        <button id="share-btn" class="topbar-btn" aria-label="Поделиться" type="button" title="Поделиться (пока без функционала)">
          <!-- Share SVG (no functionality) -->
          <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7a3.49 3.49 0 0 0 0-1.39l7.05-4.11A2.99 2.99 0 1 0 15 5a3 3 0 0 0 .09.77L8.04 9.88a3 3 0 1 0 0 4.24l6.99 4.06c-.06.24-.1.49-.1.76A3 3 0 1 0 18 16.08z"/>
          </svg>
        </button>
        <button id="zoom-btn" class="topbar-btn" aria-label="Увеличить" type="button" title="Увеличение (пока без функционала)">
          <!-- Magnifier with plus -->
          <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79L20 21.5 21.5 20l-6-6zM10 13V9h1V8h-1V4H9v4H5v1h4v4h1z"/>
          </svg>
        </button>
        <button id="delete-btn" class="topbar-btn" aria-label="Удалить" type="button" title="Удалить фото">

          <!-- Trash SVG (updated: three vertical slats + bottom bar) -->
          <img src="/icons/trash-white.svg" alt="Удалить" class="icon-trash" width="20" height="20" />

        </button>
        <button id="more-btn" class="topbar-btn" aria-label="Ещё" type="button" title="Ещё (пока без функционала)">
          <!-- Vertical dots -->
          <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M12 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 6a2 2 0 1 0 .001-3.999A2 2 0 0 0 12 14zm0 6a2 2 0 1 0 .001-3.999A2 2 0 0 0 12 20z"/>
          </svg>
        </button>
      </div>
    </div>

    <div id="more-popup" class="more-popup hidden" role="dialog" aria-hidden="true"></div>

    <button id="left-btn" class="nav-overlay left" aria-label="Предыдущее фото" type="button" title="Предыдущее">
      <!-- Left arrow SVG (centered) -->
      <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
      </svg>
    </button>

    <img id="overlay-img" src="" alt="photo">

    <div id="overlay-loader" class="overlay-loader hidden" aria-hidden="true" role="status" aria-live="polite">
      <div class="spinner" aria-hidden="true"></div>
    </div>

    <button id="right-btn" class="nav-overlay right" aria-label="Следующее фото" type="button" title="Следующее">
      <!-- Right arrow SVG (centered) -->
      <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path fill="currentColor" d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/>
      </svg>
    </button>
    <!-- Close button removed per request -->
  </div>


  <div id="confirm-modal" class="confirm-modal hidden" role="dialog" aria-hidden="true" aria-label="Подтверждение удаления">
    <div class="confirm-box" role="document">
      <div class="confirm-text">Вы уверены, что хотите удалить это фото?</div>
      <div class="confirm-actions">
        <button id="confirm-yes" class="btn btn-yes" type="button">Да</button>
        <button id="confirm-no" class="btn btn-no" type="button">Нет</button>
      </div>
    </div>
  </div>

  <script src="/app.js" type="module"></script>

<!-- Пользователь (логин/профиль) modal -->
<div id="user-modal" class="modal hidden" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal-backdrop"></div>
  <div class="modal-panel" role="document" aria-labelledby="user-modal-title">
    <button id="user-modal-close" class="modal-close" aria-label="Закрыть">&times;</button>
    <h3 id="user-modal-title" class="modal-title">Пользователь</h3>
    <div id="user-modal-body" class="modal-body">
      <div id="user-form" class="user-form">
        <input id="user-login-input" class="auth-input" type="text" placeholder="Логин" />
        <div class="pass-wrap"><input id="user-pass-input" class="auth-input" type="password" placeholder="Пароль" /></div>
        <div id="user-error" class="auth-error" aria-live="polite" style="display:none;color:#ff4d4f;margin:6px 0;"></div>
        <button id="user-login-btn" class="auth-btn">Войти</button>
      </div>
      <div id="user-profile" class="user-profile hidden">
        <div id="user-name" class="user-name"></div>
        <button id="user-logout-btn" class="auth-btn">Выйти</button>
      </div>
    </div>
  </div>
</div>

</body>
</html>
